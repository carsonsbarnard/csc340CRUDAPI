<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Animal List</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light" style="background-color: #e3f2fd;">
  <a class="navbar-brand" href="/animals/all"></a>
  <ul class="nav justify-content-end">
    <li class="nav-item">
      <a class="nav-link active" aria-current="page" href="/animals/all">Home</a>
    </li>
  </ul>
</nav>

<div class="container">
  <h1 data-th-text="${title}"></h1>
</div>

<div class="row" align="center">
  <form action="/animals/search">
    <label>
      <input type="text" name="name" size="30" placeholder="Search By Animal Name &#128270;">
    </label>
  </form>
</div>

<table class="table table-striped">
  <thead>
  <tr>
    <th>ID</th>
    <th>Name</th>
    <th>Species</th>
    <th>Habitat</th>
    <th>Scientific Name</th>
    <th>Description</th>
    <th>Action</th>
  </tr>
  </thead>
  <tbody>
  <!-- Use "a" as the iterator variable, not "animal" -->
  <tr th:each="a : ${animalList}">
    <td><a th:href="@{/animals/{animalId}(animalId=${a.animalId})}" th:text="${a.animalId}"></a></td>
    <td th:text="${a.name}"></td>
    <td th:text="${a.species}"></td>
    <td th:text="${a.habitat}"></td>
    <td th:text="${a.scientificName}"></td>
    <td th:text="${a.description}"></td>
    <td>
      <a th:href="@{/animals/update/{id}(id=${a.animalId})}">Update</a> &nbsp;
      <a th:href="@{/animals/delete/{id}(id=${a.animalId})}">Delete</a>
    </td>
  </tr>
  </tbody>
</table>

<button class="btn btn-outline-primary" onclick="openForm()">Create New Animal</button>
<form id="new-animal" action="/animals/new" method="post" style="display:none">
  <input type="text" id="name" name="name" placeholder="Name"/>
  <input type="text" id="species" name="species" placeholder="Species"/>
  <input type="text" id="habitat" name="habitat" placeholder="Habitat"/>
  <input type="text" id="scientificName" name="scientificName" placeholder="Scientific Name"/>
  <input type="text" id="description" name="description" placeholder="Description"/>
  <button type="submit" class="btn btn-primary">Save</button>
  <button type="reset" class="btn btn-danger" onclick="closeForm()">Cancel</button>
</form>

<script>
  function openForm() {
    document.getElementById("new-animal").style.display = "block";
  }

  function closeForm() {
    document.getElementById("new-animal").style.display = "none";
  }
</script>

</body>
</html>
